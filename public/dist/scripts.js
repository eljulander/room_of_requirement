"use strict";var config={apiKey:"AIzaSyCRfRp20kEkpwO1Bs30sDyBkC4Qf-rsuNM",authDomain:"course-file-auditor.firebaseapp.com",databaseURL:"https://course-file-auditor.firebaseio.com",storageBucket:"course-file-auditor.appspot.com"};firebase.initializeApp(config);var database=firebase.database(),provider=new firebase.auth.GoogleAuthProvider;
"use strict";function toggleSignIn(){if(firebase.auth().currentUser)firebase.auth().signOut();else{var e=new firebase.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/plus.login"),e.addScope("profile"),e.addScope("email"),firebase.auth().signInWithRedirect(e)}document.getElementById("quickstart-sign-in").disabled=!0}function initApp(){firebase.auth().getRedirectResult().then(function(e){if(e.credential){var i=e.credential.accessToken;console.log(i)}else console.log("token null");e.user})["catch"](function(e){var i=e.code;e.message,e.email,e.credential;"auth/account-exists-with-different-credential"===i?alert("You have already signed up with a different auth provider for that email."):console.error(e)}),firebase.auth().onAuthStateChanged(function(e){e?(displayName=e.displayName,email=e.email,emailVerified=e.emailVerified,photoURL=e.photoURL,isAnonymous=e.isAnonymous,uid=e.uid,refreshToken=e.refreshToken,providerData=e.providerData,document.getElementById("quickstart-sign-in").textContent="Sign out",database.ref("users/"+uid).update({displayName:displayName,email:email,emailVerified:emailVerified,photoURL:photoURL,isAnonymous:isAnonymous,uid:uid,refreshToken:refreshToken,providerData:providerData})):document.getElementById("quickstart-sign-in").textContent="Sign in with Google",document.getElementById("quickstart-sign-in").disabled=!1}),document.getElementById("quickstart-sign-in").addEventListener("click",toggleSignIn,!1)}var displayName,email,emailVerified,photoURL,isAnonymous,uid,refreshToken,providerData;window.onload=function(){initApp()};
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,e){t.wand=e()}("undefined"!=typeof window?window:void 0,function(){var t={apndr:function(t,e){if("object"!==("undefined"==typeof t?"undefined":_typeof(t))||"object"!==("undefined"==typeof e?"undefined":_typeof(e))||Array.isArray(e))if("object"!==("undefined"==typeof t?"undefined":_typeof(t)))console.error("First parameter passed is not an object element.");else if("object"!==("undefined"==typeof e?"undefined":_typeof(e)))"string"!=typeof e&&"number"!=typeof e||t.appendChild(this.txt(e));else if(Array.isArray(e))for(var r=e,n=0;n<r.length;n++)this.apndr(t,r[n]);else console.error("Parameters are not compatible in the lib.apndr function.  Hit the arrow on the left for call stack.");else t.appendChild(e)},querApndr:function(t,e,r){var n=document.querySelector(t);if(null!=n){if(Array.isArray(e))for(var o=e,i=0;i<o.length;i++)this.apndr(n,this.crtElm(o[i]));else r?this.apndr(n,this.crtElm(e,r)):this.apndr(n,e);return n}console.error("No tag exists in the DOM. Hit the arrow on the left for call stack.")},querAttr:function(t,e,r){var n=document.querySelector(t);null==n?console.error("No tag exists in the DOM. Hit the arrow on the left for call stack."):e&&n.setAttribute(e,r)},txt:function(t){return"string"==typeof t?document.createTextNode(t):"number"==typeof t?document.createTextNode(t.toString()):void console.error("Parameter passed to lib.txt is not a string nor a number.  Hit the arrow on the left for call stack.")},crtElm:function(t,e){var r,n=document.createElement(t);return e&&("string"==typeof e?(r=this.txt(e),this.apndr(n,r)):console.error("Must pass a string as the second param in lib.crtElm function.  Hit the arrow on the left for call stack.")),n}};return t});
"use strict";!function(a){function n(a,n){var r=wand.crtElm("section"),o=wand.crtElm("h2","Project Number "+a);o.className="courseTitle",wand.apndr(r,o),wand.querApndr("main article",r)}var r,o;a.startCourseLoad=function(){database.ref("Mark's Tool").once("child_added",function(a){o=a.val(),r=a.key,n(r,o)})},a.onload=a.startCourseLoad}(window);
"use strict";!function(){function e(){wand.querApndr("article","h1","Profile want to be seen?  Not yet!")}function t(){wand.querApndr("article","h1","Stats want to be seen?  Not yet!")}function n(e){var t=wand.crtElm("div");t.id="todoContain";for(var n in e){var a=wand.crtElm("h3",n),r=wand.crtElm("div"),i=wand.crtElm("div");r.id="todo",i.id="details",i.setAttribute("display","false"),"false"===i.getAttribute("display")&&(i.style.display="none");for(var o in e[n]){var l=wand.crtElm("label",o+" | "),d=wand.crtElm("input"),c=wand.txt(" "+e[n][o]["Links Broken"]+" broken Links | ");d.type="checkbox",wand.apndr(l,c),wand.apndr(l,d),wand.apndr(i,l)}wand.apndr(r,a),wand.apndr(t,r),wand.apndr(t,i),wand.querApndr("article",t)}}function a(e){"There is nothing here!"===e?wand.querApndr("article","p","Quizzes are okay! "+e):console.log("Load a quiz table for the conversion!")}function r(e){var t=wand.crtElm("a","IL3 Link"),n=wand.crtElm("p");t.href=e,wand.apndr(n,t),wand.querApndr("article",n)}function i(e){console.log(e),r(e.Link),a(e.Quizzes),n(e["Content Pages"])}function o(e){var t,n=e.target.innerText.split("Project Number ")[1];database.ref("Mark's Tool/"+n).once("value",function(e){t=e.val(),i(t)})}function l(){d.innerHTML=""}var d=wand.querApndr("article");document.onclick=function(n){var a=n.target.innerText.indexOf("Project")>-1,r="h2"===n.target.localName,i="button"===n.target.localName,d=n.target.innerText.indexOf("Home")>-1,c=n.target.innerText.indexOf("Profile")>-1,s=n.target.innerText.indexOf("Stats")>-1,u=n.target.localName,f=n.target.innerText.indexOf("Lesson")>-1;if(a&&r)console.log("Project Clicked!"),l(),o(n);else if(d&&i)console.log("Home Clicked!"),l(),window.startCourseLoad();else if(c&&i)console.log("Profile clicked!"),l(),e();else if(s&&i)console.log("Stats clicked!"),l(),t();else{if(!u||!f)return;var p=n.target.parentElement.nextElementSibling,w=p.getAttribute("display");"false"===w?(p.style.display="block",p.setAttribute("display","true")):"true"===w&&(p.style.display="none",p.setAttribute("display","false"))}}}();
"use strict";!function(){var t={home:"Home",profile:"My Profile",stats:"Stats"};for(var r in t)wand.querApndr("nav","button",t[r])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyIsImxvZ2luLmpzIiwid2FuZC5qcyIsIm1haW4uanMiLCJjbGlja2hhbmRsZXIuanMiLCJuYXYuanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYXBpS2V5IiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwic3RvcmFnZUJ1Y2tldCIsImZpcmViYXNlIiwiaW5pdGlhbGl6ZUFwcCIsImRhdGFiYXNlIiwicHJvdmlkZXIiLCJhdXRoIiwiR29vZ2xlQXV0aFByb3ZpZGVyIiwidG9nZ2xlU2lnbkluIiwiY3VycmVudFVzZXIiLCJzaWduT3V0IiwiYWRkU2NvcGUiLCJzaWduSW5XaXRoUmVkaXJlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZGlzYWJsZWQiLCJpbml0QXBwIiwiZ2V0UmVkaXJlY3RSZXN1bHQiLCJ0aGVuIiwicmVzdWx0IiwiY3JlZGVudGlhbCIsInRva2VuIiwiYWNjZXNzVG9rZW4iLCJjb25zb2xlIiwibG9nIiwidXNlciIsImVycm9yIiwiZXJyb3JDb2RlIiwiY29kZSIsIm1lc3NhZ2UiLCJlbWFpbCIsImFsZXJ0Iiwib25BdXRoU3RhdGVDaGFuZ2VkIiwiZGlzcGxheU5hbWUiLCJlbWFpbFZlcmlmaWVkIiwicGhvdG9VUkwiLCJpc0Fub255bW91cyIsInVpZCIsInJlZnJlc2hUb2tlbiIsInByb3ZpZGVyRGF0YSIsInRleHRDb250ZW50IiwicmVmIiwidXBkYXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIndpbmRvdyIsIm9ubG9hZCIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm9iaiIsImNvbnN0cnVjdG9yIiwiZ2xvIiwibGliIiwid2FuZCIsInVuZGVmaW5lZCIsImFwbmRyIiwiYSIsImIiLCJBcnJheSIsImlzQXJyYXkiLCJhcHBlbmRDaGlsZCIsInRoaXMiLCJ0eHQiLCJhcnIiLCJpIiwibGVuZ3RoIiwicXVlckFwbmRyIiwiYyIsImVsZSIsInF1ZXJ5U2VsZWN0b3IiLCJjcnRFbG0iLCJxdWVyQXR0ciIsInNldEF0dHJpYnV0ZSIsImNyZWF0ZVRleHROb2RlIiwidG9TdHJpbmciLCJjcmVhdGVFbGVtZW50IiwiZ2VuZXJhdGVDb3Vyc2VQcmV2aWV3IiwiaWQiLCJkZXRhaWxzIiwic2VjdGlvbiIsImhlYWRlciIsImNsYXNzTmFtZSIsImNvdXJzZV9pZCIsImNvdXJzZV9kZXRhaWxzIiwic3RhcnRDb3Vyc2VMb2FkIiwib25jZSIsInNuYXAiLCJ2YWwiLCJrZXkiLCJsb2FkUHJvZmlsZSIsImxvYWRTdGF0cyIsImxvYWRDb250ZW50VG9kbyIsImNwIiwidG9kb0NvbnRhaW4iLCJoMyIsInRvZG8iLCJkaXZzdWIiLCJnZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImRpc3BsYXkiLCJqIiwic3VicCIsImlucHV0IiwibnVtTGlua3MiLCJ0eXBlIiwicXVpekxvYWQiLCJxIiwiZGlzTGluayIsImwiLCJsaW5rIiwicGFyYSIsImhyZWYiLCJkaXNwbGF5RGV0YWlscyIsImNkIiwiTGluayIsIlF1aXp6ZXMiLCJsb2FkQ291cnNlRGV0YWlscyIsImUiLCJjb3Vyc2VEZXRhaWxzIiwiY291cnNlTnVtIiwidGFyZ2V0IiwiaW5uZXJUZXh0Iiwic3BsaXQiLCJjbGVhckFydGljbGUiLCJhcnRpY2xlIiwiaW5uZXJIVE1MIiwib25jbGljayIsInByb2plY3QiLCJpbmRleE9mIiwiaDJsb2NhbCIsImxvY2FsTmFtZSIsImJ1dHRvbmxvY2FsIiwiaG9tZSIsInByb2ZpbGUiLCJzdGF0cyIsImgzbG9jYWwiLCJsZXNzb25OdW0iLCJuZXh0U2liIiwicGFyZW50RWxlbWVudCIsIm5leHRFbGVtZW50U2libGluZyIsImRpc0Jvb2wiLCJuYXZpZyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBQSxJQUFJQSxTQUNBQyxPQUFRLDBDQUNSQyxXQUFZLHNDQUNaQyxZQUFhLDZDQUNiQyxjQUFlLGtDQUVuQkMsVUFBU0MsY0FBY04sT0FFdkIsSUFBSU8sVUFBV0YsU0FBU0UsV0FDcEJDLFNBQVcsR0FBSUgsVUFBU0ksS0FBS0M7QUNU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RyxRQUFRQyxJQUFJLGlCQUNabUcsSUFDQS9FLE9BQU93QyxzQkFDSixJQUFJaUQsR0FBV0YsRUFDbEI1RyxRQUFRQyxJQUFJLG9CQUNabUcsSUFDQWxDLFFBQ0csSUFBSTZDLEdBQVNILEVBQ2hCNUcsUUFBUUMsSUFBSSxrQkFDWm1HLElBQ0FqQyxRQUNHLENBQUEsSUFBSTZDLElBQVdDLEVBV2xCLE1BVkEsSUFBSUMsR0FBVXBCLEVBQUVHLE9BQU9rQixjQUFjQyxtQkFDakNDLEVBQVVILEVBQVF4QyxhQUFhLFVBQ25CLFdBQVoyQyxHQUNBSCxFQUFRdkMsTUFBTUMsUUFBVSxRQUN4QnNDLEVBQVFqRSxhQUFhLFVBQVcsU0FDYixTQUFab0UsSUFDUEgsRUFBUXZDLE1BQU1DLFFBQVUsT0FDeEJzQyxFQUFRakUsYUFBYSxVQUFXO0FDekhoRCxjQUFDLFdBR0csR0FBSXFFLElBQ0FULEtBQU0sT0FDTkMsUUFBUyxhQUNUQyxNQUFPLFFBR1gsS0FBSyxHQUFJdEUsS0FBSzZFLEdBQ1Z4RixLQUFLYSxVQUFVLE1BQU8sU0FBVTJFLEVBQU03RSIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNvbmZpZyA9IHtcclxuICAgIGFwaUtleTogXCJBSXphU3lDUmZScDIwa0VrcHdPMUJzMzBzRHlCa0M0UWYtcnN1Tk1cIixcbiAgICBhdXRoRG9tYWluOiBcImNvdXJzZS1maWxlLWF1ZGl0b3IuZmlyZWJhc2VhcHAuY29tXCIsXG4gICAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9jb3Vyc2UtZmlsZS1hdWRpdG9yLmZpcmViYXNlaW8uY29tXCIsXG4gICAgc3RvcmFnZUJ1Y2tldDogXCJjb3Vyc2UtZmlsZS1hdWRpdG9yLmFwcHNwb3QuY29tXCIsXG59O1xuZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChjb25maWcpO1xyXG5cclxudmFyIGRhdGFiYXNlID0gZmlyZWJhc2UuZGF0YWJhc2UoKTtcclxudmFyIHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG4iLCIgICAgZnVuY3Rpb24gdG9nZ2xlU2lnbkluKCkge1xuICAgICAgICBpZiAoIWZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcikge1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG5cbiAgICAgICAgICAgIHByb3ZpZGVyLmFkZFNjb3BlKCdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3BsdXMubG9naW4nKTtcbiAgICAgICAgICAgIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XG4gICAgICAgICAgICBwcm92aWRlci5hZGRTY29wZSgnZW1haWwnKTtcbiAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoUmVkaXJlY3QocHJvdmlkZXIpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWlja3N0YXJ0LXNpZ24taW4nKS5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGRpc3BsYXlOYW1lLFxuICAgICAgICBlbWFpbCxcbiAgICAgICAgZW1haWxWZXJpZmllZCxcbiAgICAgICAgcGhvdG9VUkwsXG4gICAgICAgIGlzQW5vbnltb3VzLFxuICAgICAgICB1aWQsXG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgcHJvdmlkZXJEYXRhO1xuXG4gICAgZnVuY3Rpb24gaW5pdEFwcCgpIHtcbiAgICAgICAgZmlyZWJhc2UuYXV0aCgpLmdldFJlZGlyZWN0UmVzdWx0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmNyZWRlbnRpYWwpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uIFlvdSBjYW4gdXNlIGl0IHRvIGFjY2VzcyB0aGUgR29vZ2xlIEFQSS5cbiAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHQuY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRva2VuKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuIG51bGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1c2VyID0gcmVzdWx0LnVzZXI7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XG4gICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgIHZhciBlbWFpbCA9IGVycm9yLmVtYWlsO1xuICAgICAgICAgICAgdmFyIGNyZWRlbnRpYWwgPSBlcnJvci5jcmVkZW50aWFsO1xuICAgICAgICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJ2F1dGgvYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbCcpIHtcbiAgICAgICAgICAgICAgICBhbGVydCgnWW91IGhhdmUgYWxyZWFkeSBzaWduZWQgdXAgd2l0aCBhIGRpZmZlcmVudCBhdXRoIHByb3ZpZGVyIGZvciB0aGF0IGVtYWlsLicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheU5hbWUgPSB1c2VyLmRpc3BsYXlOYW1lO1xuICAgICAgICAgICAgICAgIGVtYWlsID0gdXNlci5lbWFpbDtcbiAgICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkID0gdXNlci5lbWFpbFZlcmlmaWVkO1xuICAgICAgICAgICAgICAgIHBob3RvVVJMID0gdXNlci5waG90b1VSTDtcbiAgICAgICAgICAgICAgICBpc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XG4gICAgICAgICAgICAgICAgdWlkID0gdXNlci51aWQ7XG4gICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuID0gdXNlci5yZWZyZXNoVG9rZW47XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhID0gdXNlci5wcm92aWRlckRhdGE7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVpY2tzdGFydC1zaWduLWluJykudGV4dENvbnRlbnQgPSAnU2lnbiBvdXQnO1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihgdXNlcnMvJHt1aWR9YCkudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IGVtYWlsVmVyaWZpZWQsXG4gICAgICAgICAgICAgICAgICAgIHBob3RvVVJMOiBwaG90b1VSTCxcbiAgICAgICAgICAgICAgICAgICAgaXNBbm9ueW1vdXM6IGlzQW5vbnltb3VzLFxuICAgICAgICAgICAgICAgICAgICB1aWQ6IHVpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogcHJvdmlkZXJEYXRhXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWlja3N0YXJ0LXNpZ24taW4nKS50ZXh0Q29udGVudCA9ICdTaWduIGluIHdpdGggR29vZ2xlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWlja3N0YXJ0LXNpZ24taW4nKS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1aWNrc3RhcnQtc2lnbi1pbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlU2lnbkluLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW5pdEFwcCgpO1xuICAgIH07XG4iLCIoZnVuY3Rpb24gKGdsbywgbGliKSB7XG4gICAgZ2xvLndhbmQgPSBsaWIoKTtcbn0odHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGliID0ge1xuICAgICAgICBhcG5kcjogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgYiA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgICAgICAgICAgIGEuYXBwZW5kQ2hpbGQoYik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZpcnN0IHBhcmFtZXRlciBwYXNzZWQgaXMgbm90IGFuIG9iamVjdCBlbGVtZW50LlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGIgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGIgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGIgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5hcHBlbmRDaGlsZCh0aGlzLnR4dChiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IGI7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcG5kcihhLCBhcnJbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlBhcmFtZXRlcnMgYXJlIG5vdCBjb21wYXRpYmxlIGluIHRoZSBsaWIuYXBuZHIgZnVuY3Rpb24uICBIaXQgdGhlIGFycm93IG9uIHRoZSBsZWZ0IGZvciBjYWxsIHN0YWNrLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcXVlckFwbmRyOiBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSk7XG4gICAgICAgICAgICBpZiAoZWxlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gdGFnIGV4aXN0cyBpbiB0aGUgRE9NLiBIaXQgdGhlIGFycm93IG9uIHRoZSBsZWZ0IGZvciBjYWxsIHN0YWNrLlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IGI7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwbmRyKGVsZSwgdGhpcy5jcnRFbG0oYXJyW2ldKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcG5kcihlbGUsIHRoaXMuY3J0RWxtKGIsIGMpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwbmRyKGVsZSwgYilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcXVlckF0dHI6IGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhKTtcbiAgICAgICAgICAgIGlmIChlbGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyB0YWcgZXhpc3RzIGluIHRoZSBET00uIEhpdCB0aGUgYXJyb3cgb24gdGhlIGxlZnQgZm9yIGNhbGwgc3RhY2suXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYikge1xuICAgICAgICAgICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKGIsIGMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdHh0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGEpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUGFyYW1ldGVyIHBhc3NlZCB0byBsaWIudHh0IGlzIG5vdCBhIHN0cmluZyBub3IgYSBudW1iZXIuICBIaXQgdGhlIGFycm93IG9uIHRoZSBsZWZ0IGZvciBjYWxsIHN0YWNrLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY3J0RWxtOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSksXG4gICAgICAgICAgICAgICAgdHh0O1xuICAgICAgICAgICAgaWYgKGIpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdHh0ID0gdGhpcy50eHQoYik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBuZHIoZWxlLCB0eHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJNdXN0IHBhc3MgYSBzdHJpbmcgYXMgdGhlIHNlY29uZCBwYXJhbSBpbiBsaWIuY3J0RWxtIGZ1bmN0aW9uLiAgSGl0IHRoZSBhcnJvdyBvbiB0aGUgbGVmdCBmb3IgY2FsbCBzdGFjay5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGliO1xufSkpO1xuIiwiKGZ1bmN0aW9uICh3aW5kb3cpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgY291cnNlX2lkLFxuICAgICAgICBjb3Vyc2VfZGV0YWlscztcblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQ291cnNlUHJldmlldyhpZCwgZGV0YWlscykge1xuICAgICAgICB2YXIgc2VjdGlvbiA9IHdhbmQuY3J0RWxtKFwic2VjdGlvblwiKTtcbiAgICAgICAgdmFyIGhlYWRlciA9IHdhbmQuY3J0RWxtKFwiaDJcIiwgYFByb2plY3QgTnVtYmVyICR7aWR9YCk7XG4gICAgICAgICAgICBoZWFkZXIuY2xhc3NOYW1lID0gXCJjb3Vyc2VUaXRsZVwiO1xuICAgICAgICB3YW5kLmFwbmRyKHNlY3Rpb24sIGhlYWRlcik7XG5cbiAgICAgICAgd2FuZC5xdWVyQXBuZHIoXCJtYWluIGFydGljbGVcIiwgc2VjdGlvbik7XG4gICAgfVxuXG4gICAgd2luZG93LnN0YXJ0Q291cnNlTG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkYXRhYmFzZS5yZWYoXCJNYXJrJ3MgVG9vbFwiKS5vbmNlKFwiY2hpbGRfYWRkZWRcIiwgZnVuY3Rpb24gKHNuYXApIHtcbiAgICAgICAgICAgIGNvdXJzZV9kZXRhaWxzID0gc25hcC52YWwoKTtcbiAgICAgICAgICAgIGNvdXJzZV9pZCA9IHNuYXAua2V5O1xuXG4gICAgICAgICAgICBnZW5lcmF0ZUNvdXJzZVByZXZpZXcoY291cnNlX2lkLCBjb3Vyc2VfZGV0YWlscyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHdpbmRvdy5vbmxvYWQgPSB3aW5kb3cuc3RhcnRDb3Vyc2VMb2FkO1xufSh3aW5kb3cpKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBhcnRpY2xlID0gd2FuZC5xdWVyQXBuZHIoXCJhcnRpY2xlXCIpO1xuXG4gICAgZnVuY3Rpb24gbG9hZFByb2ZpbGUoKSB7XG4gICAgICAgIHdhbmQucXVlckFwbmRyKFwiYXJ0aWNsZVwiLCBcImgxXCIsIFwiUHJvZmlsZSB3YW50IHRvIGJlIHNlZW4/ICBOb3QgeWV0IVwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkU3RhdHMoKSB7XG4gICAgICAgIHdhbmQucXVlckFwbmRyKFwiYXJ0aWNsZVwiLCBcImgxXCIsIFwiU3RhdHMgd2FudCB0byBiZSBzZWVuPyAgTm90IHlldCFcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZENvbnRlbnRUb2RvKGNwKSB7XG4gICAgICAgIHZhciB0b2RvQ29udGFpbiA9IHdhbmQuY3J0RWxtKFwiZGl2XCIpO1xuICAgICAgICB0b2RvQ29udGFpbi5pZCA9IFwidG9kb0NvbnRhaW5cIjtcblxuICAgICAgICBmb3IgKHZhciBpIGluIGNwKSB7XG5cbiAgICAgICAgICAgIHZhciBoMyA9IHdhbmQuY3J0RWxtKFwiaDNcIiwgaSksXG4gICAgICAgICAgICAgICAgdG9kbyA9IHdhbmQuY3J0RWxtKFwiZGl2XCIpLFxuICAgICAgICAgICAgICAgIGRpdnN1YiA9IHdhbmQuY3J0RWxtKFwiZGl2XCIpO1xuXG4gICAgICAgICAgICB0b2RvLmlkID0gXCJ0b2RvXCI7XG4gICAgICAgICAgICBkaXZzdWIuaWQgPSBcImRldGFpbHNcIjtcbiAgICAgICAgICAgIGRpdnN1Yi5zZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIsIFwiZmFsc2VcIik7XG5cbiAgICAgICAgICAgIGlmIChkaXZzdWIuZ2V0QXR0cmlidXRlKFwiZGlzcGxheVwiKSA9PT0gXCJmYWxzZVwiKSB7XG4gICAgICAgICAgICAgICAgZGl2c3ViLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBjcFtpXSkge1xuICAgICAgICAgICAgICAgIHZhciBzdWJwID0gd2FuZC5jcnRFbG0oXCJsYWJlbFwiLCBgJHtqfSB8IGApLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IHdhbmQuY3J0RWxtKFwiaW5wdXRcIiksXG4gICAgICAgICAgICAgICAgICAgIG51bUxpbmtzID0gd2FuZC50eHQoYCAke2NwW2ldW2pdWydMaW5rcyBCcm9rZW4nXX0gYnJva2VuIExpbmtzIHwgYClcblxuICAgICAgICAgICAgICAgIGlucHV0LnR5cGUgPSBcImNoZWNrYm94XCI7XG5cbiAgICAgICAgICAgICAgICB3YW5kLmFwbmRyKHN1YnAsIG51bUxpbmtzKTtcbiAgICAgICAgICAgICAgICB3YW5kLmFwbmRyKHN1YnAsIGlucHV0KTtcbiAgICAgICAgICAgICAgICB3YW5kLmFwbmRyKGRpdnN1Yiwgc3VicCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdhbmQuYXBuZHIodG9kbywgaDMpO1xuICAgICAgICAgICAgd2FuZC5hcG5kcih0b2RvQ29udGFpbiwgdG9kbyk7XG4gICAgICAgICAgICB3YW5kLmFwbmRyKHRvZG9Db250YWluLCBkaXZzdWIpO1xuICAgICAgICAgICAgd2FuZC5xdWVyQXBuZHIoXCJhcnRpY2xlXCIsIHRvZG9Db250YWluKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHF1aXpMb2FkKHEpIHtcbiAgICAgICAgaWYgKHEgPT09IFwiVGhlcmUgaXMgbm90aGluZyBoZXJlIVwiKSB7XG4gICAgICAgICAgICB3YW5kLnF1ZXJBcG5kcihcImFydGljbGVcIiwgXCJwXCIsIGBRdWl6emVzIGFyZSBva2F5ISAke3F9YClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9hZCBhIHF1aXogdGFibGUgZm9yIHRoZSBjb252ZXJzaW9uIVwiKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzTGluayhsKSB7XG4gICAgICAgIHZhciBsaW5rID0gd2FuZC5jcnRFbG0oXCJhXCIsIFwiSUwzIExpbmtcIiksXG4gICAgICAgICAgICBwYXJhID0gd2FuZC5jcnRFbG0oXCJwXCIpO1xuICAgICAgICBsaW5rLmhyZWYgPSBsO1xuICAgICAgICB3YW5kLmFwbmRyKHBhcmEsIGxpbmspO1xuXG4gICAgICAgIHdhbmQucXVlckFwbmRyKFwiYXJ0aWNsZVwiLCBwYXJhKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5RGV0YWlscyhjZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhjZCk7XG4gICAgICAgIGRpc0xpbmsoY2QuTGluayk7XG4gICAgICAgIHF1aXpMb2FkKGNkLlF1aXp6ZXMpO1xuICAgICAgICBsb2FkQ29udGVudFRvZG8oY2RbXCJDb250ZW50IFBhZ2VzXCJdKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkQ291cnNlRGV0YWlscyhlKSB7XG4gICAgICAgIHZhciBjb3Vyc2VOdW0gPSBlLnRhcmdldC5pbm5lclRleHQuc3BsaXQoXCJQcm9qZWN0IE51bWJlciBcIilbMV0sXG4gICAgICAgICAgICBjb3Vyc2VEZXRhaWxzO1xuXG4gICAgICAgIGRhdGFiYXNlLnJlZihgTWFyaydzIFRvb2wvJHtjb3Vyc2VOdW19YCkub25jZShcInZhbHVlXCIsIGZ1bmN0aW9uIChzbmFwKSB7XG4gICAgICAgICAgICBjb3Vyc2VEZXRhaWxzID0gc25hcC52YWwoKTtcbiAgICAgICAgICAgIGRpc3BsYXlEZXRhaWxzKGNvdXJzZURldGFpbHMpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyQXJ0aWNsZSgpIHtcbiAgICAgICAgYXJ0aWNsZS5pbm5lckhUTUwgPSBcIlwiO1xuICAgIH1cblxuICAgIGRvY3VtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgcHJvamVjdCA9IGUudGFyZ2V0LmlubmVyVGV4dC5pbmRleE9mKFwiUHJvamVjdFwiKSA+IC0xLFxuICAgICAgICAgICAgaDJsb2NhbCA9IGUudGFyZ2V0LmxvY2FsTmFtZSA9PT0gXCJoMlwiLFxuICAgICAgICAgICAgYnV0dG9ubG9jYWwgPSBlLnRhcmdldC5sb2NhbE5hbWUgPT09IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICBob21lID0gZS50YXJnZXQuaW5uZXJUZXh0LmluZGV4T2YoXCJIb21lXCIpID4gLTEsXG4gICAgICAgICAgICBwcm9maWxlID0gZS50YXJnZXQuaW5uZXJUZXh0LmluZGV4T2YoXCJQcm9maWxlXCIpID4gLTEsXG4gICAgICAgICAgICBzdGF0cyA9IGUudGFyZ2V0LmlubmVyVGV4dC5pbmRleE9mKFwiU3RhdHNcIikgPiAtMSxcbiAgICAgICAgICAgIGgzbG9jYWwgPSBlLnRhcmdldC5sb2NhbE5hbWUsXG4gICAgICAgICAgICBsZXNzb25OdW0gPSBlLnRhcmdldC5pbm5lclRleHQuaW5kZXhPZihcIkxlc3NvblwiKSA+IC0xO1xuXG4gICAgICAgIGlmIChwcm9qZWN0ICYmIGgybG9jYWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUHJvamVjdCBDbGlja2VkIVwiKTtcbiAgICAgICAgICAgIGNsZWFyQXJ0aWNsZSgpO1xuICAgICAgICAgICAgbG9hZENvdXJzZURldGFpbHMoZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaG9tZSAmJiBidXR0b25sb2NhbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJIb21lIENsaWNrZWQhXCIpO1xuICAgICAgICAgICAgY2xlYXJBcnRpY2xlKCk7XG4gICAgICAgICAgICB3aW5kb3cuc3RhcnRDb3Vyc2VMb2FkKCk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvZmlsZSAmJiBidXR0b25sb2NhbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQcm9maWxlIGNsaWNrZWQhXCIpO1xuICAgICAgICAgICAgY2xlYXJBcnRpY2xlKCk7XG4gICAgICAgICAgICBsb2FkUHJvZmlsZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRzICYmIGJ1dHRvbmxvY2FsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXRzIGNsaWNrZWQhXCIpO1xuICAgICAgICAgICAgY2xlYXJBcnRpY2xlKCk7XG4gICAgICAgICAgICBsb2FkU3RhdHMoKTtcbiAgICAgICAgfSBlbHNlIGlmIChoM2xvY2FsICYmIGxlc3Nvbk51bSkge1xuICAgICAgICAgICAgdmFyIG5leHRTaWIgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZyxcbiAgICAgICAgICAgICAgICBkaXNCb29sID0gbmV4dFNpYi5nZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgaWYgKGRpc0Jvb2wgPT09IFwiZmFsc2VcIikge1xuICAgICAgICAgICAgICAgIG5leHRTaWIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICBuZXh0U2liLnNldEF0dHJpYnV0ZShcImRpc3BsYXlcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkaXNCb29sID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgICAgIG5leHRTaWIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIG5leHRTaWIuc2V0QXR0cmlidXRlKFwiZGlzcGxheVwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfTtcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbmF2aWcgPSB7XG4gICAgICAgIGhvbWU6IFwiSG9tZVwiLFxuICAgICAgICBwcm9maWxlOiBcIk15IFByb2ZpbGVcIixcbiAgICAgICAgc3RhdHM6IFwiU3RhdHNcIlxuICAgIH1cblxuICAgIGZvciAodmFyIGkgaW4gbmF2aWcpIHtcbiAgICAgICAgd2FuZC5xdWVyQXBuZHIoXCJuYXZcIiwgXCJidXR0b25cIiwgbmF2aWdbaV0pO1xuICAgIH1cblxufSgpKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
