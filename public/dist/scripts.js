"use strict";var config={apiKey:"AIzaSyCRfRp20kEkpwO1Bs30sDyBkC4Qf-rsuNM",authDomain:"course-file-auditor.firebaseapp.com",databaseURL:"https://course-file-auditor.firebaseio.com",storageBucket:"course-file-auditor.appspot.com"};firebase.initializeApp(config);var database=firebase.database();
"use strict";!function(){function e(){if(firebase.auth().currentUser)localStorage.removeItem("ManagementAuthO"),firebase.auth().signOut();else{var e=new firebase.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/plus.login"),e.addScope("profile"),e.addScope("email"),firebase.auth().signInWithRedirect(e)}document.getElementById("quickstart-sign-in").disabled=!0}function t(e,t){database.ref("users").once("value",function(i){i.forEach(function(i){i.key===e&&(i.val().role||t())})})}function i(){firebase.auth().getRedirectResult().then(function(e){if(e.credential){var t=e.credential.accessToken;location.reload(),console.log(t)}e.user})["catch"](function(e){var t=e.code;e.message,e.email,e.credential;"auth/account-exists-with-different-credential"===t?alert("You have already signed up with a different auth provider for that email."):console.error(e)}),firebase.auth().onAuthStateChanged(function(e){if(e){var i={displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,photoURL:e.photoURL,uid:e.uid};document.getElementById("quickstart-sign-in").textContent="Sign out",database.ref("users/"+i.uid).update({displayName:i.displayName,email:i.email,emailVerified:i.emailVerified,photoURL:i.photoURL,uid:i.uid}),t(i.uid,function(){database.ref("users/"+i.uid).update({role:0})}),localStorage.ManagementAuthO=JSON.stringify(i)}else document.getElementById("quickstart-sign-in").textContent="Sign in with Google";document.getElementById("quickstart-sign-in").disabled=!1}),document.getElementById("quickstart-sign-in").addEventListener("click",e,!1)}window.onload=function(){i()}}();
"use strict";!function(){function n(n,e){var a=$("#unassigned"),o=$("<div id='assignmentContainer'></div>"),i=$('<p><a href="'+n.Link+'">'+e+"</a></p>");o.append(i),a.append(o),console.log(n,e)}function e(){database.ref("Mark's Tool").once("value",function(e){e.forEach(function(e){var a=e.val(),o=e.key,i="There is nothing here!";a["Content Pages"]===i&&a.Quizzes===i||n(a,o)})})}function a(){console.log("finished")}function o(){console.log("dataSaved")}function i(){console.log("timeSpent")}$("a").click(function(n){var e=n.target.className;$("#"+e).css({display:"block"}),$("#shade").css({display:"block"})}),$(".cancel").click(function(n){var e=n.target.parentElement;$(e).css({display:"none"}),$("#shade").css({display:"none"})}),location.pathname.includes("admin")&&(e(),a(),o(),i())}();
"use strict";!function(){var n,o,t=JSON.parse(localStorage.ManagementAuthO),i=$("nav"),a=$("<button>Home</button>");a.click(function(n){var o=location.origin;location.assign(o+"/index.html")}),i.append(a),database.ref("users/"+t.uid).once("value",function(t){n=t.val().role,o=$("<button>Admin</button>"),n>=8&&(console.log("User logged in is Administrator"),o.click(function(n){console.log("li");var o=n.target.innerText.toLowerCase(),t=location.origin;location.assign(t+"/"+o+".html")}),i.append(o))})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyIsImxvZ2luLmpzIiwiYWRtaW4uanMiLCJuYXZpZ2F0aW9uLmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsImFwaUtleSIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsInN0b3JhZ2VCdWNrZXQiLCJmaXJlYmFzZSIsImluaXRpYWxpemVBcHAiLCJkYXRhYmFzZSIsInRvZ2dsZVNpZ25JbiIsImF1dGgiLCJjdXJyZW50VXNlciIsImxvY2FsU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJzaWduT3V0IiwicHJvdmlkZXIiLCJHb29nbGVBdXRoUHJvdmlkZXIiLCJhZGRTY29wZSIsInNpZ25JbldpdGhSZWRpcmVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJkaXNhYmxlZCIsInNldFJvbGUiLCJ1aWQiLCJmdW5jIiwicmVmIiwib25jZSIsInNuYXAiLCJmb3JFYWNoIiwiY3NuYXAiLCJrZXkiLCJ2YWwiLCJyb2xlIiwiaW5pdEFwcCIsImdldFJlZGlyZWN0UmVzdWx0IiwidGhlbiIsInJlc3VsdCIsImNyZWRlbnRpYWwiLCJ0b2tlbiIsImFjY2Vzc1Rva2VuIiwibG9jYXRpb24iLCJyZWxvYWQiLCJjb25zb2xlIiwibG9nIiwidXNlciIsImVycm9yIiwiZXJyb3JDb2RlIiwiY29kZSIsIm1lc3NhZ2UiLCJlbWFpbCIsImFsZXJ0Iiwib25BdXRoU3RhdGVDaGFuZ2VkIiwiYXV0aE8iLCJkaXNwbGF5TmFtZSIsImVtYWlsVmVyaWZpZWQiLCJwaG90b1VSTCIsInRleHRDb250ZW50IiwidXBkYXRlIiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3aW5kb3ciLCJvbmxvYWQiLCJwb3B1bGF0ZUNoZWNrb3V0IiwiY2QiLCJjbiIsInBvcHVsYXRlIiwiJCIsImNvbnRhaW5lciIsImNvdXJzZU51bSIsImFwcGVuZCIsImNoZWNrZWQiLCJjb3Vyc2VEYXRhIiwiY291cnNlTmFtZSIsIm5vdGhpbmciLCJmaW5pc2hlZCIsImRhdGFTYXZlZCIsInRpbWVTcGVudCIsImNsaWNrIiwiZSIsImNsYXNzSUQiLCJ0YXJnZXQiLCJjbGFzc05hbWUiLCJjc3MiLCJkaXNwbGF5IiwicGFyZW50IiwicGFyZW50RWxlbWVudCIsInBhdGhuYW1lIiwiaW5jbHVkZXMiLCJhZG1pbkJ1dHRvbiIsImF1dGhEYXRhIiwicGFyc2UiLCJuYXYiLCJob21lQnV0dG9uIiwicm9vdCIsIm9yaWdpbiIsImFzc2lnbiIsInBhZ2UiLCJpbm5lclRleHQiLCJ0b0xvd2VyQ2FzZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBQSxJQUFJQSxTQUNBQyxPQUFRLDBDQUNSQyxXQUFZLHNDQUNaQyxZQUFhLDZDQUNiQyxjQUFlLGtDQUVuQkMsVUFBU0MsY0FBY04sT0FFdkIsSUFBSU8sVUFBV0YsU0FBU0U7QUNSeEIsY0FBQyxXQUVHLFFBQVNDLEtBQ0wsR0FBS0gsU0FBU0ksT0FBT0MsWUFTakJDLGFBQWFDLFdBQVcsbUJBQ3hCUCxTQUFTSSxPQUFPSSxjQVZjLENBQzlCLEdBQUlDLEdBQVcsR0FBSVQsVUFBU0ksS0FBS00sa0JBRWpDRCxHQUFTRSxTQUFTLDhDQUNsQkYsRUFBU0UsU0FBUyxXQUNsQkYsRUFBU0UsU0FBUyxTQUNsQlgsU0FBU0ksT0FBT1EsbUJBQW1CSCxHQU12Q0ksU0FBU0MsZUFBZSxzQkFBc0JDLFVBQVcsRUFHN0QsUUFBU0MsR0FBUUMsRUFBS0MsR0FDbEJoQixTQUFTaUIsSUFBSSxTQUFTQyxLQUFLLFFBQVMsU0FBVUMsR0FDMUNBLEVBQUtDLFFBQVEsU0FBVUMsR0FDZkEsRUFBTUMsTUFBUVAsSUFDVE0sRUFBTUUsTUFBTUMsTUFDYlIsU0FXcEIsUUFBU1MsS0FDTDNCLFNBQVNJLE9BQU93QixvQkFBb0JDLEtBQUssU0FBVUMsR0FDL0MsR0FBSUEsRUFBT0MsV0FBWSxDQUVuQixHQUFJQyxHQUFRRixFQUFPQyxXQUFXRSxXQUM5QkMsVUFBU0MsU0FDVEMsUUFBUUMsSUFBSUwsR0FJTEYsRUFBT1EsT0FUdEJ0QyxTQVVTLFNBQVV1QyxHQUNm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QU0sU0FBVUMsR0FDeEJyQyxRQUFRQyxJQUFJLEtBRVosSUFBSXNELEdBQU9sQixFQUFFRSxPQUFPaUIsVUFBVUMsY0FDMUJMLEVBQU90RCxTQUFTdUQsTUFFcEJ2RCxVQUFTd0QsT0FBVUYsRUFBbkIsSUFBMkJHLEVBQTNCLFdBR0pMLEVBQUl0QixPQUFPbUIiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBjb25maWcgPSB7XHJcbiAgICBhcGlLZXk6IFwiQUl6YVN5Q1JmUnAyMGtFa3B3TzFCczMwc0R5QmtDNFFmLXJzdU5NXCIsXHJcbiAgICBhdXRoRG9tYWluOiBcImNvdXJzZS1maWxlLWF1ZGl0b3IuZmlyZWJhc2VhcHAuY29tXCIsXHJcbiAgICBkYXRhYmFzZVVSTDogXCJodHRwczovL2NvdXJzZS1maWxlLWF1ZGl0b3IuZmlyZWJhc2Vpby5jb21cIixcclxuICAgIHN0b3JhZ2VCdWNrZXQ6IFwiY291cnNlLWZpbGUtYXVkaXRvci5hcHBzcG90LmNvbVwiLFxyXG59O1xyXG5maXJlYmFzZS5pbml0aWFsaXplQXBwKGNvbmZpZyk7XHJcblxyXG52YXIgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBmdW5jdGlvbiB0b2dnbGVTaWduSW4oKSB7XHJcbiAgICAgICAgaWYgKCFmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBwcm92aWRlci5hZGRTY29wZSgnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9wbHVzLmxvZ2luJyk7XHJcbiAgICAgICAgICAgIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAgICAgICAgICAgIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aFJlZGlyZWN0KHByb3ZpZGVyKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ01hbmFnZW1lbnRBdXRoTycpO1xyXG4gICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVpY2tzdGFydC1zaWduLWluJykuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldFJvbGUodWlkLCBmdW5jKSB7XHJcbiAgICAgICAgZGF0YWJhc2UucmVmKFwidXNlcnNcIikub25jZShcInZhbHVlXCIsIGZ1bmN0aW9uIChzbmFwKSB7XHJcbiAgICAgICAgICAgIHNuYXAuZm9yRWFjaChmdW5jdGlvbiAoY3NuYXApIHtcclxuICAgICAgICAgICAgICAgIGlmIChjc25hcC5rZXkgPT09IHVpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY3NuYXAudmFsKCkucm9sZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdEFwcCgpIHtcclxuICAgICAgICBmaXJlYmFzZS5hdXRoKCkuZ2V0UmVkaXJlY3RSZXN1bHQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5jcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uIFlvdSBjYW4gdXNlIGl0IHRvIGFjY2VzcyB0aGUgR29vZ2xlIEFQSS5cclxuICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdC5jcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b2tlbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0b2tlbiBudWxsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHVzZXIgPSByZXN1bHQudXNlcjtcclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGUsXHJcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgZW1haWwgPSBlcnJvci5lbWFpbCxcclxuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWwgPSBlcnJvci5jcmVkZW50aWFsO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJ2F1dGgvYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbCcpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdZb3UgaGF2ZSBhbHJlYWR5IHNpZ25lZCB1cCB3aXRoIGEgZGlmZmVyZW50IGF1dGggcHJvdmlkZXIgZm9yIHRoYXQgZW1haWwuJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXV0aE8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZDogdXNlci5lbWFpbFZlcmlmaWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob3RvVVJMOiB1c2VyLnBob3RvVVJMLFxyXG4gICAgICAgICAgICAgICAgICAgIHVpZDogdXNlci51aWRcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVpY2tzdGFydC1zaWduLWluJykudGV4dENvbnRlbnQgPSAnU2lnbiBvdXQnO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihgdXNlcnMvJHthdXRoTy51aWR9YCkudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogYXV0aE8uZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGF1dGhPLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IGF1dGhPLmVtYWlsVmVyaWZpZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvdG9VUkw6IGF1dGhPLnBob3RvVVJMLFxyXG4gICAgICAgICAgICAgICAgICAgIHVpZDogYXV0aE8udWlkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0Um9sZShhdXRoTy51aWQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihgdXNlcnMvJHthdXRoTy51aWR9YCkudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogMCxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZVtcIk1hbmFnZW1lbnRBdXRoT1wiXSA9IEpTT04uc3RyaW5naWZ5KGF1dGhPKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVpY2tzdGFydC1zaWduLWluJykudGV4dENvbnRlbnQgPSAnU2lnbiBpbiB3aXRoIEdvb2dsZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1aWNrc3RhcnQtc2lnbi1pbicpLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1aWNrc3RhcnQtc2lnbi1pbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlU2lnbkluLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbml0QXBwKCk7XHJcbiAgICB9XHJcblxyXG59KCkpXHJcbiIsIi8qXG5kYXRhYmFzZSBpcyBhIGdsb2JhbCB2YXJpYWJsZVxuKi9cblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qXG4gICAgRXZlbnRzIHRvIGhhbmRsZSBtb2RhbHNcbiAgICAqL1xuICAgICQoXCJhXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBjbGFzc0lEID0gZS50YXJnZXQuY2xhc3NOYW1lO1xuXG4gICAgICAgICQoYCMke2NsYXNzSUR9YCkuY3NzKHtcbiAgICAgICAgICAgIFwiZGlzcGxheVwiOiBcImJsb2NrXCJcbiAgICAgICAgfSlcblxuICAgICAgICAkKGAjc2hhZGVgKS5jc3Moe1xuICAgICAgICAgICAgXCJkaXNwbGF5XCI6IFwiYmxvY2tcIlxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICAkKFwiLmNhbmNlbFwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZS50YXJnZXQucGFyZW50RWxlbWVudDtcblxuICAgICAgICAkKHBhcmVudCkuY3NzKHtcbiAgICAgICAgICAgIFwiZGlzcGxheVwiOiBcIm5vbmVcIixcbiAgICAgICAgfSlcblxuICAgICAgICAkKCcjc2hhZGUnKS5jc3Moe1xuICAgICAgICAgICAgXCJkaXNwbGF5XCI6IFwibm9uZVwiLFxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICAvKlxuICAgIFJ1bnMgdGhlIGRhdGEgZm9yIHRoZSBjaGVja2VkIE1vZGFsXG4gICAgKi9cbiAgICBcbiAgICBmdW5jdGlvbiB1c2VyU2VsZWN0KCkgeyAgICAgICAgXG4gICAgICAgIGRhdGFiYXNlLnJlZihcInVzZXJzXCIpLm9uY2UoXCJ2YWx1ZVwiLCBmdW5jdGlvbihzbmFwKXtcbiAgICAgICAgICAgIHNuYXAuZm9yRWFjaChmdW5jdGlvbihjc25hcCl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY3NuYXAudmFsKCkuZGlzcGxheU5hbWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBwb3B1bGF0ZUNoZWNrb3V0KGNkLCBjbikge1xuICAgICAgICB2YXIgcG9wdWxhdGUgPSAkKFwiI3VuYXNzaWduZWRcIiksXG4gICAgICAgICAgICBjb250YWluZXIgPSAkKFwiPGRpdiBpZD0nYXNzaWdubWVudENvbnRhaW5lcic+PC9kaXY+XCIpLFxuICAgICAgICAgICAgY291cnNlTnVtID0gJChgPHA+PGEgaHJlZj1cIiR7Y2RbJ0xpbmsnXX1cIj4ke2NufTwvYT48L3A+YCk7XG4gICAgICAgIFxuICAgICAgICBjb250YWluZXIuYXBwZW5kKGNvdXJzZU51bSk7XG4gICAgICAgIFxuICAgICAgICBwb3B1bGF0ZS5hcHBlbmQoY29udGFpbmVyKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGNkLCBjbik7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGNoZWNrZWQoKSB7XG4gICAgICAgIFxuICAgICAgICBkYXRhYmFzZS5yZWYoXCJNYXJrJ3MgVG9vbFwiKS5vbmNlKFwidmFsdWVcIiwgZnVuY3Rpb24gKHNuYXApIHtcbiAgICAgICAgICAgIHNuYXAuZm9yRWFjaChmdW5jdGlvbiAoY3NuYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgY291cnNlRGF0YSA9IGNzbmFwLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICBjb3Vyc2VOYW1lID0gY3NuYXAua2V5LFxuICAgICAgICAgICAgICAgICAgICBub3RoaW5nID0gXCJUaGVyZSBpcyBub3RoaW5nIGhlcmUhXCI7XG5cbiAgICAgICAgICAgICAgICBpZiAoY291cnNlRGF0YVtcIkNvbnRlbnQgUGFnZXNcIl0gIT09IG5vdGhpbmcgfHwgY291cnNlRGF0YVtcIlF1aXp6ZXNcIl0gIT09IG5vdGhpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGVDaGVja291dChjb3Vyc2VEYXRhLCBjb3Vyc2VOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG5cbiAgICAvKlxuICAgIFJ1bnMgdGhlIGRhdGEgZm9yIHRoZSBmaW5pc2hlZCBtb2RhbFxuICAgICovXG4gICAgZnVuY3Rpb24gZmluaXNoZWQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZmluaXNoZWRcIik7XG4gICAgfVxuXG4gICAgLypcbiAgICBSZXRyaWV2ZSB0aGUgZGF0YSBmb3IgYW1vdW50IG9mIGRhdGEgc2F2ZWQgaW4gRXF1ZWxsYVxuICAgICovXG4gICAgZnVuY3Rpb24gZGF0YVNhdmVkKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImRhdGFTYXZlZFwiKTtcbiAgICB9XG5cbiAgICAvKlxuICAgIFJldHJpZXZlIHRoZSBkYXRhIGZvciBhbW91bnQgb2YgdGltZSBzcGVudFxuICAgICovXG4gICAgZnVuY3Rpb24gdGltZVNwZW50KCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInRpbWVTcGVudFwiKTtcbiAgICB9XG5cbiAgICAvKlxuICAgIERldGVybWluZSB0aGF0IHRoZSBsb2NhdGlvbiBpcyB0aGUgYWRtaW4gcGFnZSBhbmQgbG9hZFxuICAgIGFsbCBvZiB0aGUgZGF0YSB3aXRoIHRoZSBhZG1pbmlzdHJhdG9yIHJvbGUuXG4gICAgKi9cbiAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoXCJhZG1pblwiKSkge1xuICAgICAgICBjaGVja2VkKCk7XG4gICAgICAgIGZpbmlzaGVkKCk7XG4gICAgICAgIGRhdGFTYXZlZCgpO1xuICAgICAgICB0aW1lU3BlbnQoKTtcbiAgICB9XG5cbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBhdXRoRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlWydNYW5hZ2VtZW50QXV0aE8nXSksXG4gICAgICAgIHJvbGUsXG4gICAgICAgIG5hdiA9ICQoXCJuYXZcIiksXG4gICAgICAgIGhvbWVCdXR0b24gPSAkKFwiPGJ1dHRvbj5Ib21lPC9idXR0b24+XCIpLFxuICAgICAgICBhZG1pbkJ1dHRvbjtcblxuICAgIGhvbWVCdXR0b24uY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHJvb3QgPSBsb2NhdGlvbi5vcmlnaW47XG4gICAgICAgIGxvY2F0aW9uLmFzc2lnbihgJHtyb290fS9pbmRleC5odG1sYCk7XG4gICAgfSk7XG5cbiAgICBuYXYuYXBwZW5kKGhvbWVCdXR0b24pO1xuXG4gICAgZGF0YWJhc2UucmVmKGB1c2Vycy8ke2F1dGhEYXRhLnVpZH1gKS5vbmNlKFwidmFsdWVcIiwgZnVuY3Rpb24gKHNuYXApIHtcbiAgICAgICAgcm9sZSA9IHNuYXAudmFsKCkucm9sZSxcbiAgICAgICAgYWRtaW5CdXR0b24gPSAkKFwiPGJ1dHRvbj5BZG1pbjwvYnV0dG9uPlwiKTtcblxuICAgICAgICBpZiAocm9sZSA+PSA4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIgbG9nZ2VkIGluIGlzIEFkbWluaXN0cmF0b3JcIik7XG5cbiAgICAgICAgICAgIGFkbWluQnV0dG9uLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJsaVwiKVxuXG4gICAgICAgICAgICAgICAgdmFyIHBhZ2UgPSBlLnRhcmdldC5pbm5lclRleHQudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGxvY2F0aW9uLm9yaWdpbjtcblxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmFzc2lnbihgJHtyb290fS8ke3BhZ2V9Lmh0bWxgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBuYXYuYXBwZW5kKGFkbWluQnV0dG9uKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSgpKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
