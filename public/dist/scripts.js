"use strict";var config={apiKey:"AIzaSyCRfRp20kEkpwO1Bs30sDyBkC4Qf-rsuNM",authDomain:"course-file-auditor.firebaseapp.com",databaseURL:"https://course-file-auditor.firebaseio.com",storageBucket:"course-file-auditor.appspot.com"};firebase.initializeApp(config);var database=firebase.database(),provider=new firebase.auth.GoogleAuthProvider;
"use strict";function toggleSignIn(){if(firebase.auth().currentUser)firebase.auth().signOut();else{var e=new firebase.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/plus.login"),e.addScope("profile"),e.addScope("email"),firebase.auth().signInWithRedirect(e)}document.getElementById("quickstart-sign-in").disabled=!0}function initApp(){firebase.auth().getRedirectResult().then(function(e){if(e.credential){var i=e.credential.accessToken;console.log(i)}else console.log("token null");e.user})["catch"](function(e){var i=e.code;e.message,e.email,e.credential;"auth/account-exists-with-different-credential"===i?alert("You have already signed up with a different auth provider for that email."):console.error(e)}),firebase.auth().onAuthStateChanged(function(e){e?(displayName=e.displayName,email=e.email,emailVerified=e.emailVerified,photoURL=e.photoURL,isAnonymous=e.isAnonymous,uid=e.uid,refreshToken=e.refreshToken,providerData=e.providerData,document.getElementById("quickstart-sign-in").textContent="Sign out",database.ref("users/"+uid).update({displayName:displayName,email:email,emailVerified:emailVerified,photoURL:photoURL,isAnonymous:isAnonymous,uid:uid,refreshToken:refreshToken,providerData:providerData})):document.getElementById("quickstart-sign-in").textContent="Sign in with Google",document.getElementById("quickstart-sign-in").disabled=!1}),document.getElementById("quickstart-sign-in").addEventListener("click",toggleSignIn,!1)}var displayName,email,emailVerified,photoURL,isAnonymous,uid,refreshToken,providerData;window.onload=function(){initApp()};
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,e){t.wand=e()}("undefined"!=typeof window?window:void 0,function(){var t={apndr:function(t,e){if("object"!==("undefined"==typeof t?"undefined":_typeof(t))||"object"!==("undefined"==typeof e?"undefined":_typeof(e))||Array.isArray(e))if("object"!==("undefined"==typeof t?"undefined":_typeof(t)))console.error("First parameter passed is not an object element.");else if("object"!==("undefined"==typeof e?"undefined":_typeof(e)))"string"!=typeof e&&"number"!=typeof e||t.appendChild(this.txt(e));else if(Array.isArray(e))for(var r=e,n=0;n<r.length;n++)this.apndr(t,r[n]);else console.error("Parameters are not compatible in the lib.apndr function.  Hit the arrow on the left for call stack.");else t.appendChild(e)},querApndr:function(t,e,r){var n=document.querySelector(t);if(null!=n){if(Array.isArray(e))for(var o=e,i=0;i<o.length;i++)this.apndr(n,this.crtElm(o[i]));else r?this.apndr(n,this.crtElm(e,r)):this.apndr(n,e);return n}console.error("No tag exists in the DOM. Hit the arrow on the left for call stack.")},querAttr:function(t,e,r){var n=document.querySelector(t);null==n?console.error("No tag exists in the DOM. Hit the arrow on the left for call stack."):e&&n.setAttribute(e,r)},txt:function(t){return"string"==typeof t?document.createTextNode(t):"number"==typeof t?document.createTextNode(t.toString()):void console.error("Parameter passed to lib.txt is not a string nor a number.  Hit the arrow on the left for call stack.")},crtElm:function(t,e){var r,n=document.createElement(t);return e&&("string"==typeof e?(r=this.txt(e),this.apndr(n,r)):console.error("Must pass a string as the second param in lib.crtElm function.  Hit the arrow on the left for call stack.")),n}};return t});
"use strict";!function(a){function n(a,n){var r=wand.crtElm("section"),o=wand.crtElm("h2","Project Number "+a);o.className="courseTitle",wand.apndr(r,o),wand.querApndr("main article",r)}var r,o;a.startCourseLoad=function(){database.ref("Mark's Tool").once("child_added",function(a){o=a.val(),r=a.key,n(r,o)})},a.onload=a.startCourseLoad}(window);
"use strict";!function(){function e(){wand.querApndr("article","h1","Profile want to be seen?  Not yet!")}function t(){wand.querApndr("article","h1","Stats want to be seen?  Not yet!")}function n(e,t){database.ref(t).once("value",function(t){var n=t.val();"False"===n.Checked?e.checked=!1:"True"===n.Checked&&(e.checked=!0)}),e.onclick=function(n){e.checked===!1?(console.log(!1),database.ref(t).update({Checked:"False"})):e.checked===!0&&(console.log(e,t),database.ref(t).update({Checked:"True"}))}}function a(e,t){var a=wand.crtElm("div");a.id="todoContain";for(var r in e){var o=wand.crtElm("h3",r),i=wand.crtElm("div"),d=wand.crtElm("div");i.id="todo",d.id="details",d.setAttribute("display","false"),"false"===d.getAttribute("display")&&(d.style.display="none");for(var l in e[r]){var c=wand.crtElm("label",l+" | "),s=wand.crtElm("input"),u=wand.txt(" "+e[r][l]["Links Broken"]+" broken Links | "),f="Mark's Tool/"+t+"/Content Pages/"+r+"/"+l;s.type="checkbox",n(s,f),wand.apndr(c,u),wand.apndr(c,s),wand.apndr(d,c)}wand.apndr(i,o),wand.apndr(a,i),wand.apndr(a,d),wand.querApndr("article",a)}}function r(e){"There is nothing here!"===e?wand.querApndr("article","p","Quizzes are okay! "+e):console.log("Load a quiz table for the conversion!")}function o(e){var t=wand.crtElm("a","IL3 Link"),n=wand.crtElm("p");t.href=e,wand.apndr(n,t),wand.querApndr("article",n)}function i(e,t){o(e.Link),r(e.Quizzes),a(e["Content Pages"],t)}function d(e){var t,n=e.target.innerText.split("Project Number ")[1];database.ref("Mark's Tool/"+n).once("value",function(e){t=e.val(),i(t,n)})}function l(){s.innerHTML=""}function c(e,t){"false"===e?(t.style.display="block",t.setAttribute("display","true")):"true"===e&&(t.style.display="none",t.setAttribute("display","false"))}var s=wand.querApndr("article");document.onclick=function(n){var a=n.target.innerText.indexOf("Project")>-1,r="h2"===n.target.localName,o="button"===n.target.localName,i=n.target.innerText.indexOf("Home")>-1,s=n.target.innerText.indexOf("Profile")>-1,u=n.target.innerText.indexOf("Stats")>-1,f=n.target.localName,p=n.target.innerText.indexOf("Lesson")>-1;"checkbox"===n.target.type;if(a&&r)console.log("Project Clicked!"),l(),d(n);else if(i&&o)console.log("Home Clicked!"),l(),window.startCourseLoad();else if(s&&o)console.log("Profile clicked!"),l(),e();else if(u&&o)console.log("Stats clicked!"),l(),t();else{if(!f||!p)return;var k=n.target.parentElement.nextElementSibling,w=k.getAttribute("display");c(w,k)}}}();
"use strict";!function(){var t={home:"Home",profile:"My Profile",stats:"Stats"};for(var r in t)wand.querApndr("nav","button",t[r])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyIsImxvZ2luLmpzIiwid2FuZC5qcyIsIm1haW4uanMiLCJjbGlja2hhbmRsZXIuanMiLCJuYXYuanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYXBpS2V5IiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwic3RvcmFnZUJ1Y2tldCIsImZpcmViYXNlIiwiaW5pdGlhbGl6ZUFwcCIsImRhdGFiYXNlIiwicHJvdmlkZXIiLCJhdXRoIiwiR29vZ2xlQXV0aFByb3ZpZGVyIiwidG9nZ2xlU2lnbkluIiwiY3VycmVudFVzZXIiLCJzaWduT3V0IiwiYWRkU2NvcGUiLCJzaWduSW5XaXRoUmVkaXJlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZGlzYWJsZWQiLCJpbml0QXBwIiwiZ2V0UmVkaXJlY3RSZXN1bHQiLCJ0aGVuIiwicmVzdWx0IiwiY3JlZGVudGlhbCIsInRva2VuIiwiYWNjZXNzVG9rZW4iLCJjb25zb2xlIiwibG9nIiwidXNlciIsImVycm9yIiwiZXJyb3JDb2RlIiwiY29kZSIsIm1lc3NhZ2UiLCJlbWFpbCIsImFsZXJ0Iiwib25BdXRoU3RhdGVDaGFuZ2VkIiwiZGlzcGxheU5hbWUiLCJlbWFpbFZlcmlmaWVkIiwicGhvdG9VUkwiLCJpc0Fub255bW91cyIsInVpZCIsInJlZnJlc2hUb2tlbiIsInByb3ZpZGVyRGF0YSIsInRleHRDb250ZW50IiwicmVmIiwidXBkYXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIndpbmRvdyIsIm9ubG9hZCIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm9iaiIsImNvbnN0cnVjdG9yIiwiZ2xvIiwibGliIiwid2FuZCIsInVuZGVmaW5lZCIsImFwbmRyIiwiYSIsImIiLCJBcnJheSIsImlzQXJyYXkiLCJhcHBlbmRDaGlsZCIsInRoaXMiLCJ0eHQiLCJhcnIiLCJpIiwibGVuZ3RoIiwicXVlckFwbmRyIiwiYyIsImVsZSIsInF1ZXJ5U2VsZWN0b3IiLCJjcnRFbG0iLCJxdWVyQXR0ciIsInNldEF0dHJpYnV0ZSIsImNyZWF0ZVRleHROb2RlIiwidG9TdHJpbmciLCJjcmVhdGVFbGVtZW50IiwiZ2VuZXJhdGVDb3Vyc2VQcmV2aWV3IiwiaWQiLCJkZXRhaWxzIiwic2VjdGlvbiIsImhlYWRlciIsImNsYXNzTmFtZSIsImNvdXJzZV9pZCIsImNvdXJzZV9kZXRhaWxzIiwic3RhcnRDb3Vyc2VMb2FkIiwib25jZSIsInNuYXAiLCJ2YWwiLCJrZXkiLCJsb2FkUHJvZmlsZSIsImxvYWRTdGF0cyIsImxvYWRDaGVja2VkIiwiaW5wdXQiLCJzZWFyY2hRdWVyIiwicGVyc29uYWxEYXRhIiwiQ2hlY2tlZCIsImNoZWNrZWQiLCJvbmNsaWNrIiwiZSIsImxvYWRDb250ZW50VG9kbyIsImNwIiwiY24iLCJ0b2RvQ29udGFpbiIsImgzIiwidG9kbyIsImRpdnN1YiIsImdldEF0dHJpYnV0ZSIsInN0eWxlIiwiZGlzcGxheSIsImoiLCJzdWJwIiwibnVtTGlua3MiLCJ0eXBlIiwicXVpekxvYWQiLCJxIiwiZGlzTGluayIsImwiLCJsaW5rIiwicGFyYSIsImhyZWYiLCJkaXNwbGF5RGV0YWlscyIsImNkIiwiTGluayIsIlF1aXp6ZXMiLCJsb2FkQ291cnNlRGV0YWlscyIsImNvdXJzZURldGFpbHMiLCJjb3Vyc2VOdW0iLCJ0YXJnZXQiLCJpbm5lclRleHQiLCJzcGxpdCIsImNsZWFyQXJ0aWNsZSIsImFydGljbGUiLCJpbm5lckhUTUwiLCJkcm9wZG93biIsImRpc0Jvb2wiLCJuZXh0U2liIiwicHJvamVjdCIsImluZGV4T2YiLCJoMmxvY2FsIiwibG9jYWxOYW1lIiwiYnV0dG9ubG9jYWwiLCJob21lIiwicHJvZmlsZSIsInN0YXRzIiwiaDNsb2NhbCIsImxlc3Nvbk51bSIsInBhcmVudEVsZW1lbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJuYXZpZyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBQSxJQUFJQSxTQUNBQyxPQUFRLDBDQUNSQyxXQUFZLHNDQUNaQyxZQUFhLDZDQUNiQyxjQUFl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QU9tQixjQUFjQyxtQkFDakNiLEVBQVVDLEVBQVE3QixhQUFhLFVBQ25DMkIsR0FBU0MsRUFBU0M7QUMxSjlCLGNBQUMsV0FHRyxHQUFJYSxJQUNBUCxLQUFNLE9BQ05DLFFBQVMsYUFDVEMsTUFBTyxRQUdYLEtBQUssR0FBSS9FLEtBQUtvRixHQUNWL0YsS0FBS2EsVUFBVSxNQUFPLFNBQVVrRixFQUFNcEYiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBjb25maWcgPSB7XHJcbiAgICBhcGlLZXk6IFwiQUl6YVN5Q1JmUnAyMGtFa3B3TzFCczMwc0R5QmtDNFFmLXJzdU5NXCIsXG4gICAgYXV0aERvbWFpbjogXCJjb3Vyc2UtZmlsZS1hdWRpdG9yLmZpcmViYXNlYXBwLmNvbVwiLFxuICAgIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vY291cnNlLWZpbGUtYXVkaXRvci5maXJlYmFzZWlvLmNvbVwiLFxuICAgIHN0b3JhZ2VCdWNrZXQ6IFwiY291cnNlLWZpbGUtYXVkaXRvci5hcHBzcG90LmNvbVwiLFxufTtcbmZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnKTtcclxuXHJcbnZhciBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7XHJcbnZhciBwcm92aWRlciA9IG5ldyBmaXJlYmFzZS5hdXRoLkdvb2dsZUF1dGhQcm92aWRlcigpO1xuIiwiICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZ25JbigpIHtcbiAgICAgICAgaWYgKCFmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgIHZhciBwcm92aWRlciA9IG5ldyBmaXJlYmFzZS5hdXRoLkdvb2dsZUF1dGhQcm92aWRlcigpO1xuXG4gICAgICAgICAgICBwcm92aWRlci5hZGRTY29wZSgnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9wbHVzLmxvZ2luJyk7XG4gICAgICAgICAgICBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xuICAgICAgICAgICAgcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XG4gICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aFJlZGlyZWN0KHByb3ZpZGVyKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25PdXQoKTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVpY2tzdGFydC1zaWduLWluJykuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBkaXNwbGF5TmFtZSxcbiAgICAgICAgZW1haWwsXG4gICAgICAgIGVtYWlsVmVyaWZpZWQsXG4gICAgICAgIHBob3RvVVJMLFxuICAgICAgICBpc0Fub255bW91cyxcbiAgICAgICAgdWlkLFxuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIHByb3ZpZGVyRGF0YTtcblxuICAgIGZ1bmN0aW9uIGluaXRBcHAoKSB7XG4gICAgICAgIGZpcmViYXNlLmF1dGgoKS5nZXRSZWRpcmVjdFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5jcmVkZW50aWFsKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBHb29nbGUgQWNjZXNzIFRva2VuLiBZb3UgY2FuIHVzZSBpdCB0byBhY2Nlc3MgdGhlIEdvb2dsZSBBUEkuXG4gICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0LmNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b2tlbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0b2tlbiBudWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdXNlciA9IHJlc3VsdC51c2VyO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHZhciBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xuICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICB2YXIgZW1haWwgPSBlcnJvci5lbWFpbDtcbiAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0gZXJyb3IuY3JlZGVudGlhbDtcbiAgICAgICAgICAgIGlmIChlcnJvckNvZGUgPT09ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ1lvdSBoYXZlIGFscmVhZHkgc2lnbmVkIHVwIHdpdGggYSBkaWZmZXJlbnQgYXV0aCBwcm92aWRlciBmb3IgdGhhdCBlbWFpbC4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lID0gdXNlci5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgICAgICBlbWFpbCA9IHVzZXIuZW1haWw7XG4gICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZCA9IHVzZXIuZW1haWxWZXJpZmllZDtcbiAgICAgICAgICAgICAgICBwaG90b1VSTCA9IHVzZXIucGhvdG9VUkw7XG4gICAgICAgICAgICAgICAgaXNBbm9ueW1vdXMgPSB1c2VyLmlzQW5vbnltb3VzO1xuICAgICAgICAgICAgICAgIHVpZCA9IHVzZXIudWlkO1xuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbiA9IHVzZXIucmVmcmVzaFRva2VuO1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSA9IHVzZXIucHJvdmlkZXJEYXRhO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1aWNrc3RhcnQtc2lnbi1pbicpLnRleHRDb250ZW50ID0gJ1NpZ24gb3V0JztcbiAgICAgICAgICAgICAgICBkYXRhYmFzZS5yZWYoYHVzZXJzLyR7dWlkfWApLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBkaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBlbWFpbFZlcmlmaWVkLFxuICAgICAgICAgICAgICAgICAgICBwaG90b1VSTDogcGhvdG9VUkwsXG4gICAgICAgICAgICAgICAgICAgIGlzQW5vbnltb3VzOiBpc0Fub255bW91cyxcbiAgICAgICAgICAgICAgICAgICAgdWlkOiB1aWQsXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogcmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHByb3ZpZGVyRGF0YVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVpY2tzdGFydC1zaWduLWluJykudGV4dENvbnRlbnQgPSAnU2lnbiBpbiB3aXRoIEdvb2dsZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVpY2tzdGFydC1zaWduLWluJykuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWlja3N0YXJ0LXNpZ24taW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVNpZ25JbiwgZmFsc2UpO1xuICAgIH1cblxuICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGluaXRBcHAoKTtcbiAgICB9O1xuIiwiKGZ1bmN0aW9uIChnbG8sIGxpYikge1xuICAgIGdsby53YW5kID0gbGliKCk7XG59KHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxpYiA9IHtcbiAgICAgICAgYXBuZHI6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGEgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGIgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgICAgICAgICAgICBhLmFwcGVuZENoaWxkKGIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgcGFzc2VkIGlzIG5vdCBhbiBvYmplY3QgZWxlbWVudC5cIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBiICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBiID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBiID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGEuYXBwZW5kQ2hpbGQodGhpcy50eHQoYikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBiO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBuZHIoYSwgYXJyW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJQYXJhbWV0ZXJzIGFyZSBub3QgY29tcGF0aWJsZSBpbiB0aGUgbGliLmFwbmRyIGZ1bmN0aW9uLiAgSGl0IHRoZSBhcnJvdyBvbiB0aGUgbGVmdCBmb3IgY2FsbCBzdGFjay5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHF1ZXJBcG5kcjogZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGEpO1xuICAgICAgICAgICAgaWYgKGVsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHRhZyBleGlzdHMgaW4gdGhlIERPTS4gSGl0IHRoZSBhcnJvdyBvbiB0aGUgbGVmdCBmb3IgY2FsbCBzdGFjay5cIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBiO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcG5kcihlbGUsIHRoaXMuY3J0RWxtKGFycltpXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBuZHIoZWxlLCB0aGlzLmNydEVsbShiLCBjKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcG5kcihlbGUsIGIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHF1ZXJBdHRyOiBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSk7XG4gICAgICAgICAgICBpZiAoZWxlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gdGFnIGV4aXN0cyBpbiB0aGUgRE9NLiBIaXQgdGhlIGFycm93IG9uIHRoZSBsZWZ0IGZvciBjYWxsIHN0YWNrLlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZShiLCBjKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHR4dDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGEgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlBhcmFtZXRlciBwYXNzZWQgdG8gbGliLnR4dCBpcyBub3QgYSBzdHJpbmcgbm9yIGEgbnVtYmVyLiAgSGl0IHRoZSBhcnJvdyBvbiB0aGUgbGVmdCBmb3IgY2FsbCBzdGFjay5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNydEVsbTogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLFxuICAgICAgICAgICAgICAgIHR4dDtcbiAgICAgICAgICAgIGlmIChiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBiID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHR4dCA9IHRoaXMudHh0KGIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwbmRyKGVsZSwgdHh0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTXVzdCBwYXNzIGEgc3RyaW5nIGFzIHRoZSBzZWNvbmQgcGFyYW0gaW4gbGliLmNydEVsbSBmdW5jdGlvbi4gIEhpdCB0aGUgYXJyb3cgb24gdGhlIGxlZnQgZm9yIGNhbGwgc3RhY2suXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpYjtcbn0pKTtcbiIsIihmdW5jdGlvbiAod2luZG93KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGNvdXJzZV9pZCxcbiAgICAgICAgY291cnNlX2RldGFpbHM7XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUNvdXJzZVByZXZpZXcoaWQsIGRldGFpbHMpIHtcbiAgICAgICAgdmFyIHNlY3Rpb24gPSB3YW5kLmNydEVsbShcInNlY3Rpb25cIik7XG4gICAgICAgIHZhciBoZWFkZXIgPSB3YW5kLmNydEVsbShcImgyXCIsIGBQcm9qZWN0IE51bWJlciAke2lkfWApO1xuICAgICAgICAgICAgaGVhZGVyLmNsYXNzTmFtZSA9IFwiY291cnNlVGl0bGVcIjtcbiAgICAgICAgd2FuZC5hcG5kcihzZWN0aW9uLCBoZWFkZXIpO1xuXG4gICAgICAgIHdhbmQucXVlckFwbmRyKFwibWFpbiBhcnRpY2xlXCIsIHNlY3Rpb24pO1xuICAgIH1cblxuICAgIHdpbmRvdy5zdGFydENvdXJzZUxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGF0YWJhc2UucmVmKFwiTWFyaydzIFRvb2xcIikub25jZShcImNoaWxkX2FkZGVkXCIsIGZ1bmN0aW9uIChzbmFwKSB7XG4gICAgICAgICAgICBjb3Vyc2VfZGV0YWlscyA9IHNuYXAudmFsKCk7XG4gICAgICAgICAgICBjb3Vyc2VfaWQgPSBzbmFwLmtleTtcblxuICAgICAgICAgICAgZ2VuZXJhdGVDb3Vyc2VQcmV2aWV3KGNvdXJzZV9pZCwgY291cnNlX2RldGFpbHMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB3aW5kb3cub25sb2FkID0gd2luZG93LnN0YXJ0Q291cnNlTG9hZDtcbn0od2luZG93KSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgYXJ0aWNsZSA9IHdhbmQucXVlckFwbmRyKFwiYXJ0aWNsZVwiKTtcblxuICAgIGZ1bmN0aW9uIGxvYWRQcm9maWxlKCkge1xuICAgICAgICB3YW5kLnF1ZXJBcG5kcihcImFydGljbGVcIiwgXCJoMVwiLCBcIlByb2ZpbGUgd2FudCB0byBiZSBzZWVuPyAgTm90IHlldCFcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFN0YXRzKCkge1xuICAgICAgICB3YW5kLnF1ZXJBcG5kcihcImFydGljbGVcIiwgXCJoMVwiLCBcIlN0YXRzIHdhbnQgdG8gYmUgc2Vlbj8gIE5vdCB5ZXQhXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRDaGVja2VkKGlucHV0LCBzZWFyY2hRdWVyKSB7XG4gICAgICAgIGRhdGFiYXNlLnJlZihzZWFyY2hRdWVyKS5vbmNlKFwidmFsdWVcIiwgZnVuY3Rpb24gKHNuYXApIHtcbiAgICAgICAgICAgIHZhciBwZXJzb25hbERhdGEgPSBzbmFwLnZhbCgpO1xuICAgICAgICAgICAgaWYgKHBlcnNvbmFsRGF0YS5DaGVja2VkID09PSBcIkZhbHNlXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBlcnNvbmFsRGF0YS5DaGVja2VkID09PSBcIlRydWVcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlucHV0Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZmFsc2UpO1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihzZWFyY2hRdWVyKS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICBcIkNoZWNrZWRcIjogXCJGYWxzZVwiLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpbnB1dCwgc2VhcmNoUXVlcik7XG4gICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKHNlYXJjaFF1ZXIpLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIFwiQ2hlY2tlZFwiOiBcIlRydWVcIixcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRDb250ZW50VG9kbyhjcCwgY24pIHtcbiAgICAgICAgdmFyIHRvZG9Db250YWluID0gd2FuZC5jcnRFbG0oXCJkaXZcIik7XG4gICAgICAgIHRvZG9Db250YWluLmlkID0gXCJ0b2RvQ29udGFpblwiO1xuXG4gICAgICAgIGZvciAodmFyIGkgaW4gY3ApIHtcblxuICAgICAgICAgICAgdmFyIGgzID0gd2FuZC5jcnRFbG0oXCJoM1wiLCBpKSxcbiAgICAgICAgICAgICAgICB0b2RvID0gd2FuZC5jcnRFbG0oXCJkaXZcIiksXG4gICAgICAgICAgICAgICAgZGl2c3ViID0gd2FuZC5jcnRFbG0oXCJkaXZcIik7XG5cbiAgICAgICAgICAgIHRvZG8uaWQgPSBcInRvZG9cIjtcbiAgICAgICAgICAgIGRpdnN1Yi5pZCA9IFwiZGV0YWlsc1wiO1xuICAgICAgICAgICAgZGl2c3ViLnNldEF0dHJpYnV0ZShcImRpc3BsYXlcIiwgXCJmYWxzZVwiKTtcblxuICAgICAgICAgICAgaWYgKGRpdnN1Yi5nZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIpID09PSBcImZhbHNlXCIpIHtcbiAgICAgICAgICAgICAgICBkaXZzdWIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBqIGluIGNwW2ldKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnAgPSB3YW5kLmNydEVsbShcImxhYmVsXCIsIGAke2p9IHwgYCksXG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gd2FuZC5jcnRFbG0oXCJpbnB1dFwiKSxcbiAgICAgICAgICAgICAgICAgICAgbnVtTGlua3MgPSB3YW5kLnR4dChgICR7Y3BbaV1bal1bJ0xpbmtzIEJyb2tlbiddfSBicm9rZW4gTGlua3MgfCBgKSxcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUXVlciA9IGBNYXJrJ3MgVG9vbC8ke2NufS9Db250ZW50IFBhZ2VzLyR7aX0vJHtqfWA7XG5cbiAgICAgICAgICAgICAgICBpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xuXG4gICAgICAgICAgICAgICAgbG9hZENoZWNrZWQoaW5wdXQsIHNlYXJjaFF1ZXIpO1xuXG4gICAgICAgICAgICAgICAgd2FuZC5hcG5kcihzdWJwLCBudW1MaW5rcyk7XG4gICAgICAgICAgICAgICAgd2FuZC5hcG5kcihzdWJwLCBpbnB1dCk7XG4gICAgICAgICAgICAgICAgd2FuZC5hcG5kcihkaXZzdWIsIHN1YnApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3YW5kLmFwbmRyKHRvZG8sIGgzKTtcbiAgICAgICAgICAgIHdhbmQuYXBuZHIodG9kb0NvbnRhaW4sIHRvZG8pO1xuICAgICAgICAgICAgd2FuZC5hcG5kcih0b2RvQ29udGFpbiwgZGl2c3ViKTtcbiAgICAgICAgICAgIHdhbmQucXVlckFwbmRyKFwiYXJ0aWNsZVwiLCB0b2RvQ29udGFpbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBxdWl6TG9hZChxKSB7XG4gICAgICAgIGlmIChxID09PSBcIlRoZXJlIGlzIG5vdGhpbmcgaGVyZSFcIikge1xuICAgICAgICAgICAgd2FuZC5xdWVyQXBuZHIoXCJhcnRpY2xlXCIsIFwicFwiLCBgUXVpenplcyBhcmUgb2theSEgJHtxfWApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvYWQgYSBxdWl6IHRhYmxlIGZvciB0aGUgY29udmVyc2lvbiFcIilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc0xpbmsobCkge1xuICAgICAgICB2YXIgbGluayA9IHdhbmQuY3J0RWxtKFwiYVwiLCBcIklMMyBMaW5rXCIpLFxuICAgICAgICAgICAgcGFyYSA9IHdhbmQuY3J0RWxtKFwicFwiKTtcbiAgICAgICAgbGluay5ocmVmID0gbDtcbiAgICAgICAgd2FuZC5hcG5kcihwYXJhLCBsaW5rKTtcblxuICAgICAgICB3YW5kLnF1ZXJBcG5kcihcImFydGljbGVcIiwgcGFyYSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheURldGFpbHMoY2QsIGNuKSB7XG4gICAgICAgIGRpc0xpbmsoY2QuTGluayk7XG4gICAgICAgIHF1aXpMb2FkKGNkLlF1aXp6ZXMpO1xuICAgICAgICBsb2FkQ29udGVudFRvZG8oY2RbXCJDb250ZW50IFBhZ2VzXCJdLCBjbik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZENvdXJzZURldGFpbHMoZSkge1xuICAgICAgICB2YXIgY291cnNlTnVtID0gZS50YXJnZXQuaW5uZXJUZXh0LnNwbGl0KFwiUHJvamVjdCBOdW1iZXIgXCIpWzFdLFxuICAgICAgICAgICAgY291cnNlRGV0YWlscztcblxuICAgICAgICBkYXRhYmFzZS5yZWYoYE1hcmsncyBUb29sLyR7Y291cnNlTnVtfWApLm9uY2UoXCJ2YWx1ZVwiLCBmdW5jdGlvbiAoc25hcCkge1xuICAgICAgICAgICAgY291cnNlRGV0YWlscyA9IHNuYXAudmFsKCk7XG4gICAgICAgICAgICBkaXNwbGF5RGV0YWlscyhjb3Vyc2VEZXRhaWxzLCBjb3Vyc2VOdW0pO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyQXJ0aWNsZSgpIHtcbiAgICAgICAgYXJ0aWNsZS5pbm5lckhUTUwgPSBcIlwiO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRyb3Bkb3duKGRpc0Jvb2wsIG5leHRTaWIpIHtcbiAgICAgICAgaWYgKGRpc0Jvb2wgPT09IFwiZmFsc2VcIikge1xuICAgICAgICAgICAgbmV4dFNpYi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgbmV4dFNpYi5zZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChkaXNCb29sID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgbmV4dFNpYi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICBuZXh0U2liLnNldEF0dHJpYnV0ZShcImRpc3BsYXlcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgcHJvamVjdCA9IGUudGFyZ2V0LmlubmVyVGV4dC5pbmRleE9mKFwiUHJvamVjdFwiKSA+IC0xLFxuICAgICAgICAgICAgaDJsb2NhbCA9IGUudGFyZ2V0LmxvY2FsTmFtZSA9PT0gXCJoMlwiLFxuICAgICAgICAgICAgYnV0dG9ubG9jYWwgPSBlLnRhcmdldC5sb2NhbE5hbWUgPT09IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICBob21lID0gZS50YXJnZXQuaW5uZXJUZXh0LmluZGV4T2YoXCJIb21lXCIpID4gLTEsXG4gICAgICAgICAgICBwcm9maWxlID0gZS50YXJnZXQuaW5uZXJUZXh0LmluZGV4T2YoXCJQcm9maWxlXCIpID4gLTEsXG4gICAgICAgICAgICBzdGF0cyA9IGUudGFyZ2V0LmlubmVyVGV4dC5pbmRleE9mKFwiU3RhdHNcIikgPiAtMSxcbiAgICAgICAgICAgIGgzbG9jYWwgPSBlLnRhcmdldC5sb2NhbE5hbWUsXG4gICAgICAgICAgICBsZXNzb25OdW0gPSBlLnRhcmdldC5pbm5lclRleHQuaW5kZXhPZihcIkxlc3NvblwiKSA+IC0xLFxuICAgICAgICAgICAgY2hlY2tlZCA9IGUudGFyZ2V0LnR5cGUgPT09IFwiY2hlY2tib3hcIjtcblxuICAgICAgICBpZiAocHJvamVjdCAmJiBoMmxvY2FsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlByb2plY3QgQ2xpY2tlZCFcIik7XG4gICAgICAgICAgICBjbGVhckFydGljbGUoKTtcbiAgICAgICAgICAgIGxvYWRDb3Vyc2VEZXRhaWxzKGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGhvbWUgJiYgYnV0dG9ubG9jYWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSG9tZSBDbGlja2VkIVwiKTtcbiAgICAgICAgICAgIGNsZWFyQXJ0aWNsZSgpO1xuICAgICAgICAgICAgd2luZG93LnN0YXJ0Q291cnNlTG9hZCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHByb2ZpbGUgJiYgYnV0dG9ubG9jYWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUHJvZmlsZSBjbGlja2VkIVwiKTtcbiAgICAgICAgICAgIGNsZWFyQXJ0aWNsZSgpO1xuICAgICAgICAgICAgbG9hZFByb2ZpbGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0cyAmJiBidXR0b25sb2NhbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdGF0cyBjbGlja2VkIVwiKTtcbiAgICAgICAgICAgIGNsZWFyQXJ0aWNsZSgpO1xuICAgICAgICAgICAgbG9hZFN0YXRzKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaDNsb2NhbCAmJiBsZXNzb25OdW0pIHtcbiAgICAgICAgICAgIHZhciBuZXh0U2liID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcsXG4gICAgICAgICAgICAgICAgZGlzQm9vbCA9IG5leHRTaWIuZ2V0QXR0cmlidXRlKFwiZGlzcGxheVwiKTtcbiAgICAgICAgICAgIGRyb3Bkb3duKGRpc0Jvb2wsIG5leHRTaWIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfTtcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbmF2aWcgPSB7XG4gICAgICAgIGhvbWU6IFwiSG9tZVwiLFxuICAgICAgICBwcm9maWxlOiBcIk15IFByb2ZpbGVcIixcbiAgICAgICAgc3RhdHM6IFwiU3RhdHNcIlxuICAgIH1cblxuICAgIGZvciAodmFyIGkgaW4gbmF2aWcpIHtcbiAgICAgICAgd2FuZC5xdWVyQXBuZHIoXCJuYXZcIiwgXCJidXR0b25cIiwgbmF2aWdbaV0pO1xuICAgIH1cblxufSgpKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
